<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Coins by Market Cap</title>
        <script
        src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.12/d3.min.js"></script>
    </head>
    <body>
        <h1>hey</h1>

        <script type="text/javascript">

        var w = 700;
        var h = 500;



                $.get( "https://api.coinmarketcap.com/v1/ticker/", function(data){
                    console.log(data);
                    dataset = data;
                })
                .fail(function(){
                    alert("hey u failed GET request, fool");
                })
                .done(function(){
                    var svg = d3.select("body")
                        .append("svg")
                        .attr("width", w)
                        .attr("height", h)

                    var xScale = d3.scale.ordinal()
                        .domain(d3.range(dataset.length))
                        .rangeRoundBands([0, w], 0.05)

                        // var xScale = d3.scale.ordinal()
                        //             .domain(d3.range(dataset.length))
                        //             .rangeRoundBands([0, w], 0.05)

                    var yScale = d3.scale.linear()
                        .domain([0, d3.max(dataset)])
                        .range([0, h])

                    d3.selectAll("rect")
                        .data(dataset)
                        .enter()
                        .append("rect")
                        .attr("x", function(d, i){
                            return xScale(i);
                        })
                        .attr("y", function(d){
                            return h - d;
                        })
                        .attr("width", function(d, i){
                            return d3.rangeBand()
                        })
                        .attr("height", function(d){
                            return d;
                        })

                        $(document).ready(function(){
                            alert("hey");
                }

                )

            })
        </script>

    </body>
</html>
