<!DOCTYPE html>
<html>
    <head>

        <meta charset="utf-8">
        <title>Template Loading D3</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.12/d3.min.js"></script>

    </head>
    <body>

        <h1>Loading D3.js Template</h1>

        <script type="text/javascript">

        var xhr = new XMLHttpRequest();

        function makeRequest(){
            xhr.open("GET", "https://api.coinmarketcap.com/v1/ticker/", true);
            xhr.send();
            xhr.onreadystatechange = processRequest;
        }

        function processRequest(){
            console.log("testing, state: ", xhr.readyState)
            if(xhr.readyState == 4 && xhr.status == 200){
                let response = JSON.parse(xhr.responseText);
                makeChart(response);
            }
        }

        function makeChart(response){
            var w = 800;
            var h = 500;

            console.log(response);

            var svg = d3.select("body")
                        .append("svg")
                        .attr("width", w)
                        .attr("height", h);


            var timeScale1 = d3.time.scale()
        		.domain([new Date(2020, 0, 1), new Date(2020, 0, 11)])
        		.range([0, 10]);

            console.log(timeScale1);
            console.log(timeScale1(new Date(2020, 0, 6)))



        }

        makeRequest();

        </script>

    </body>
</html>
